<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CaterLoop - Get Started</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #fff;
            color: #333;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .form-section {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
        }

        .testimonial-section {
            flex: 1;
            background: linear-gradient(135deg, #e8e4f3 0%, #d4d0e8 100%);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 60px;
            font-size: 24px;
            color: #333;
        }
        .logo img {
            height: 40px;
        }

        .logo-circle {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #e91e63 0%, #d81b60 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .progress-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 40px;
        }

        .progress-step {
            height: 4px;
            flex: 1;
            background: #e0e0e0;
            border-radius: 2px;
            transition: background 0.3s;
        }

        .progress-step.active {
            background: #4ade80;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: #666;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 30px;
            padding: 0;
        }

        .back-btn:hover {
            color: #333;
        }

        h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .subtitle {
            font-size: 16px;
            color: #666;
            margin-bottom: 40px;
        }

        .question {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .option-btn {
            padding: 16px 24px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-btn:hover {
            border-color: #24aca6;
            background: #f5f5ff;
        }

        .option-btn.selected {
            background: #24aca6;
            color: white;
            border-color: #24aca6;
        }

        .meal-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .meal-card {
            padding: 24px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .meal-card:hover {
            border-color: #24aca6;
            background: #f5f5ff;
        }

        .meal-card.selected {
            background: #24aca6;
            color: white;
            border-color: #24aca6;
        }

        .meal-icon {
            font-size: 48px;
        }

        .meal-label {
            font-size: 16px;
            font-weight: 500;
        }

        .time-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .time-btn {
            padding: 12px 24px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-btn:hover {
            border-color: #24aca6;
            background: #f5f5ff;
        }

        .time-btn.selected {
            background: #24aca6;
            color: white;
            border-color: #24aca6;
        }

        .day-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .day-btn {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .day-btn:hover {
            border-color: #24aca6;
            background: #f5f5ff;
        }

        .day-btn.selected {
            background: #24aca6;
            color: white;
            border-color: #24aca6;
        }

        .date-input {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-right: 16px;
        }

        .slider-container {
            margin: 30px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #24aca6 0%, #24aca6 40%, #e0e0e0 40%, #e0e0e0 100%);
            outline: none;
            -webkit-appearance: none;
            position: relative;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #24aca6;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #24aca6;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.4);
        }

        .slider-value {
            font-size: 24px;
            font-weight: 600;
            margin: 20px 0;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 14px;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 30px 0;
        }

        .toggle {
            width: 48px;
            height: 28px;
            background: #24aca6;
            border-radius: 14px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle.off {
            background: #e0e0e0;
        }

        .toggle-thumb {
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 3px;
            left: 3px;
            transition: left 0.3s;
        }

        .toggle.on .toggle-thumb {
            left: 23px;
        }

        .toggle-label {
            font-size: 16px;
            font-weight: 500;
        }

        .toggle-hint {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #999;
            font-size: 14px;
            margin-top: 8px;
        }

        .continue-btn {
            padding: 16px 40px;
            background: #000;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }

        .continue-btn:hover {
            background: #313132;
        }

        .continue-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .continue-btn.visible {
            display: block;
        }

        .testimonial-content {
            text-align: center;
            max-width: 500px;
        }

        .google-reviews {
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            margin-bottom: 30px;
        }

        .stars {
            color: #fbbf24;
            font-size: 18px;
        }

        .avatar {
            width: 80px;
            height: 80px;
            background: #c4c4c4;
            border-radius: 50%;
            margin: 0 auto 30px;
        }

        .testimonial-text {
            font-size: 18px;
            line-height: 1.6;
            color: #000;
            margin-bottom: 20px;
        }

        .testimonial-author {
            font-size: 16px;
            color: #000;
            font-weight: 500;
        }

        .food-categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 40px;
            margin-bottom: 40px;
        }

        .category {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .category-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .food-item {
            font-size: 15px;
            color: #666;
            padding: 4px 0;
        }

        .preference-actions {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-top: 16px;
        }

        .preference-btn {
            padding: 8px 16px;
            border: 1px solid #e0e0e0;
            background: white;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .preference-btn:hover {
            background: #f5f5f5;
        }

        .carousel-dots {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 30px 0;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #c4c4c4;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dot.active {
            background: #000;
            width: 24px;
            border-radius: 4px;
        }

        .dietary-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .dietary-btn {
            padding: 12px 24px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dietary-btn:hover {
            border-color: #24aca6;
            background: #f5f5ff;
        }

        .dietary-btn.selected {
            background: #24aca6;
            color: white;
            border-color: #24aca6;
        }

        .text-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .text-input:focus {
            outline: none;
            border-color: #24aca6;
        }

        .text-input::placeholder {
            color: #aaa;
        }

        .skip-btn {
            padding: 16px 40px;
            background: transparent;
            color: #000;
            border: none;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            margin-left: 20px;
        }

        .skip-btn:hover {
            text-decoration: underline;
        }

        .thank-you-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            text-align: center;
        }

        .email-icon {
            width: 200px;
            height: 200px;
            margin-bottom: 40px;
        }

        .thank-you-title {
            font-size: 42px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .thank-you-text {
            font-size: 18px;
            color: #666;
            line-height: 1.6;
            max-width: 500px;
        }

        .info-card {
            background: white;
            border: 2px solid #e8e4f3;
            border-radius: 16px;
            padding: 30px;
            max-width: 400px;
        }

        .info-illustration {
            width: 200px;
            height: 150px;
            margin: 0 auto 20px;
        }

        .info-title {
            font-size: 24px;
            font-weight: 600;
            color: #000;
            margin-bottom: 16px;
        }

        .info-text {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
        }

        /* Calendar Styles */
        .calendar-container {
            display: none;
            margin-bottom: 40px;
        }

        .calendar-container.active {
            display: block;
        }

        .calendars-wrapper {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .calendar {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
        }

        .calendar-header {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 10px;
        }

        .calendar-weekday {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            padding: 8px 0;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .calendar-day:not(.disabled):not(.empty):hover {
            background: #f5f5ff;
            border-color: #24aca6;
        }

        .calendar-day.disabled {
            color: #ccc;
            cursor: not-allowed;
        }

        .calendar-day.empty {
            cursor: default;
        }

        .calendar-day.selected {
            background: #24aca6;
            color: white;
            border-color: #24aca6;
        }

        .selected-dates-summary {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .selected-dates-summary h4 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #333;
        }

        .selected-dates-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-date-tag {
            padding: 6px 12px;
            background: #24aca6;
            color: white;
            border-radius: 6px;
            font-size: 13px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .selected-date-tag .remove-date {
            cursor: pointer;
            font-weight: bold;
        }

        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }

            .testimonial-section {
                min-height: 400px;
                display: none;
            }

            .food-categories {
                grid-template-columns: 1fr;
            }

            .calendars-wrapper {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .form-section {
                padding: 20px;
            }

            h1 {
                font-size: 24px;
            }

            .question {
                font-size: 18px;
            }

            .options-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .meal-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .thank-you-title {
                font-size: 32px;
            }
        }

        .hidden {
            display: none;
        }

        #groupPlanLink .fw-bolder{
            font-weight: 700;
        }
        #groupPlanLink a{
            text-decoration: none;
            color: #24aca6;
            font-weight: 700;
        }

        .carousel-container {
            width: 100%;
            max-width: 1100px;
            position: relative;
            overflow: hidden;
        }

        .carousel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .nav-btn {
            background: #f0f0f0;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .nav-btn:hover {
            background: #ddd;
        }

        #foodCarousel {
            overflow: hidden;
            width: 100%;
        }

        .carousel-container .food-categories{
            gap: 0;
            display: flex;
            transition: transform 0.6s ease-in-out;
        }

        .carousel-container .category {
            flex: 0 0 calc(25% - 1rem);
            border-radius: 12px;
            margin: 0 0.5rem;
            line-height: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .category .category-image{
            width: 100%;
            height: 100px;
            margin-bottom: 0.5rem;
        }
        .category .category-image img{
            width: 100%;
            height: 100px;
            border-radius: 12px;
        }

        .carousel-container .category:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }

        .user-detail-form{
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 40px;
        }
        .user-detail-form{
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 40px;
        }
        .user-detail-form .input{
               width: 90%;
    padding: 12px 16px;
    display: flex;
    gap: 20px;
        }
        .user-detail-form .input input{
                width: 100%;
    padding: 16px 10px;
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 16px;
    transition: 0.5s ease-in-out;
        }
        .user-detail-form .input input:focus{
               outline: none;
               border: 1px solid #24aca6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-section">
            <div class="logo">
                <img src=" images/footer_logo.png" alt="">
            </div>

            <!-- Step 1 -->
            <div id="step1" class="step">
                <div class="progress-bar">
                    <div class="progress-step active"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                </div>

                <h1>Plug in your office's size and catering needs to see what your meal plan on CaterLoop will look like!</h1>
                
                <div class="question">How many people do you expect to order on your meal plan?</div>
                
                  <div class="options-grid step-1-options">
                    <button class="option-btn less" data-value="<-20">&lt;20</button>
                    <button class="option-btn" data-value="20-39">20-39</button>
                    <button class="option-btn" data-value="40-59">40-59</button>
                    <button class="option-btn" data-value="60-79">60-79</button>
                    <button class="option-btn" data-value="80-99">80-99</button>
                    <button class="option-btn" data-value="100+">100+</button>
                </div>

                <button class="continue-btn" id="step1Btn">Customize your meal plan</button>
                <div id="groupPlanLink" class="hidden"><p class="fw-bolder">Our meal programs are designed for teams of 20 or more</p><p>For teams smaller than 20 please use <a href="https://example.com/group-meal-plan" target="_blank" rel="noopener noreferrer">Group Orders</a></p></div>
            </div>

            <!-- Step 2 -->
            <div id="step2" class="step hidden">
                <button class="back-btn" onclick="goToStep(1)">
                    <span>‚Üê</span> Back
                </button>

                <div class="progress-bar">
                    <div class="progress-step active"></div>
                    <div class="progress-step active"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                </div>

                <div class="question">Which meal are you looking to bring to your team?</div>
                <p class="subtitle">Let's begin with one meal plan. You can always add more later in your dashboard.</p>

                <div class="meal-options">
                    <div class="meal-card" data-value="breakfast">
                        <div class="meal-icon">üçï</div>
                        <div class="meal-label">Breakfast</div>
                    </div>
                    <div class="meal-card" data-value="lunch">
                        <div class="meal-icon">ü•ó</div>
                        <div class="meal-label">Lunch</div>
                    </div>
                    <div class="meal-card" data-value="dinner">
                        <div class="meal-icon">üçΩÔ∏è</div>
                        <div class="meal-label">Dinner</div>
                    </div>
                    <div class="meal-card" data-value="other">
                        <div class="meal-icon">üç¥</div>
                        <div class="meal-label">Other</div>
                    </div>
                </div>

                <div class="question">What is the ideal time for your dinner delivery?</div>

                <div class="time-options">
                    <button class="time-btn" data-value="4:00 pm">4:00 pm</button>
                    <button class="time-btn" data-value="5:00 pm">5:00 pm</button>
                    <button class="time-btn" data-value="6:00 pm">6:00 pm</button>
                    <button class="time-btn" data-value="custom">Select Your Time</button>
                </div>

                <button class="continue-btn" id="step2Btn">Continue</button>
            </div>

            <!-- Step 3 -->
            <div id="step3" class="step hidden">
                <button class="back-btn" onclick="goToStep(2)">
                    <span>‚Üê</span> Back
                </button>

                <div class="progress-bar">
                    <div class="progress-step active"></div>
                    <div class="progress-step active"></div>
                    <div class="progress-step active"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                    <div class="progress-step"></div>
                </div>

                <div class="question">How often do you want to enable dinner delivery?</div>

                <div class="time-options">
                    <button class="time-btn frequency-option" data-value="every-week">Every week</button>
                    <button class="time-btn frequency-option" data-value="custom-dates">I will set my own dates</button>
                </div>

                <div class="question" id="daysQuestion">On what day(s) would you like to receive meals?</div>

                <div class="day-options" id="dayButtonsContainer">
                    <button class="day-btn" data-value="monday">Monday</button>
                    <button class="day-btn" data-value="tuesday">Tuesday</button>
                    <button class="day-btn" data-value="wednesday">Wednesday</button>
                    <button class="day-btn" data-value="thursday">Thursday</button>
                    <button class="day-btn" data-value="friday">Friday</button>
                    <button class="day-btn" data-value="saturday">Saturday</button>
                    <button class="day-btn" data-value="sunday">Sunday</button>
                </div>

                <!-- Calendar Container -->
                <div class="calendar-container" id="calendarContainer">
                    <div class="calendars-wrapper" id="calendarsWrapper">
                        <!-- Calendars will be generated here -->
                    </div>
                    <div class="selected-dates-summary">
                        <h4>Selected Dates:</h4>
                        <div class="selected-dates-list" id="selectedDatesList">
                            <span style="color: #666;">No dates selected</span>
                        </div>
                    </div>
                </div>

                <div class="question">When would you like to start?</div>

<div style="margin: 20px 0;">
    <span class="date-input" id="startDateBtn">
        <span>üìÖ</span> Select date
    </span>
    <button class="time-btn" id="notSureBtn" data-value="not-sure">I am not sure yet</button>
</div>

<!-- Start Date Calendar Container -->
<div class="calendar-container" id="startDateCalendarContainer">
    <div class="calendars-wrapper" id="startDateCalendarsWrapper">
        <!-- Single month calendar will be generated here -->
    </div>
    <div class="selected-dates-summary" id="startDateSummary" style="display: none;">
        <h4>Selected Start Date:</h4>
        <div class="selected-dates-list" id="startDateDisplay">
            <span style="color: #666;">No date selected</span>
        </div>
    </div>
</div>

                <div class="question">Meal allowance per user</div>

                <div class="time-options">
                    <button class="time-btn" data-value="daily">Daily</button>
                    <button class="time-btn" data-value="weekly">Weekly</button>
                </div>

                <div class="question">Daily per person allowance</div>

                <div class="slider-container">
                    <div class="slider-labels">
                        <span>$0</span>
                        <span>$50</span>
                    </div>
                    <input type="range" min="0" max="50" value="20" class="slider" id="allowanceSlider">
                    <div class="slider-value" id="sliderValue">$20</div>
                </div>

                <div class="toggle-container">
                    <div class="toggle on" id="creditToggle" onclick="toggleCredit()">
                        <div class="toggle-thumb"></div>
                    </div>
                    <div class="toggle-label">Enable payment with personal credit card</div>
                </div>
                <div class="toggle-hint">
                    <span>‚ÑπÔ∏è</span>
                    <span>Allow users to use their credit card if they go over set allowance</span>
                </div>

                <button class="continue-btn" id="step3Btn">Continue</button>
            </div>

            <!-- Step 4 -->
            <div id="step4" class="step hidden">
                <button class="back-btn" onclick="goToStep(3)">
                    <span>‚Üê</span> Back
                </button>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step"></div>
                        <div class="progress-step"></div>
                    </div>
                </div>
                <div class="carousel-container">
                    <div id="foodCarousel">
                        <div class="food-categories">
                            <!-- CARD 1 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/1683266155_1.jpg" alt="">
                                </div>
                                <div class="category-title">Burgers</div>
                                <div class="food-item">Salads</div>
                                <div class="food-item">Bowls</div>
                                <div class="food-item">Vegan Friendly</div>
                                <div class="food-item">Gluten Free Friendly</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 2 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/health-food-high-fiber-content-concept-diet-fruit-vegetables-cereals-whole-wheat-pasta-grains-legumes-herbs-foods-102328760.webp" alt="">
                                </div>
                                <div class="category-title">Sandwiches</div>
                                <div class="food-item">Sandwiches</div>
                                <div class="food-item">Wraps</div>
                                <div class="food-item">Burgers</div>
                                <div class="food-item">Chicken Sandwiches</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 3 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/istockphoto-1457979959-612x612.webp" alt="">
                                </div>
                                <div class="category-title">Asian</div>
                                <div class="food-item">Chinese</div>
                                <div class="food-item">Korean</div>
                                <div class="food-item">Vietnamese</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 4 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/national-fast-food-day.webp" alt="">
                                </div>
                                <div class="category-title">Japanese</div>
                                <div class="food-item">Sushi</div>
                                <div class="food-item">Bento Boxes</div>
                                <div class="food-item">Ramen</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 5 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/top-view-fast-food-mix-mozzarella-sticks-club-sandwich-hamburger-mushroom-pizza-caesar-shrimp-salad-french-fries-ketchup-mayo-cheese-sauces-table_141793-3998.jpg" alt="">
                                </div>
                                <div class="category-title">Japanese</div>
                                <div class="food-item">Sushi</div>
                                <div class="food-item">Bento Boxes</div>
                                <div class="food-item">Ramen</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 6 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/pexels-janetrangdoan-1092730.jpg" alt="">
                                </div>
                                <div class="category-title">Japanese</div>
                                <div class="food-item">Sushi</div>
                                <div class="food-item">Bento Boxes</div>
                                <div class="food-item">Ramen</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 7 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/1683266155_1.jpg" alt="">
                                </div>
                                <div class="category-title">Japanese</div>
                                <div class="food-item">Sushi</div>
                                <div class="food-item">Bento Boxes</div>
                                <div class="food-item">Ramen</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 8 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/health-food-high-fiber-content-concept-diet-fruit-vegetables-cereals-whole-wheat-pasta-grains-legumes-herbs-foods-102328760.webp" alt="">
                                </div>
                                <div class="category-title">Japanese</div>
                                <div class="food-item">Sushi</div>
                                <div class="food-item">Bento Boxes</div>
                                <div class="food-item">Ramen</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                            <!-- CARD 9 -->
                            <div class="category">
                                <div class="category-image">
                                    <img src=" images/pexels-janetrangdoan-1092730.jpg" alt="">
                                </div>
                                <div class="category-title">Japanese</div>
                                <div class="food-item">Sushi</div>
                                <div class="food-item">Bento Boxes</div>
                                <div class="food-item">Ramen</div>
                                <div class="preference-actions">
                                    <button class="preference-btn">üëç</button>
                                    <button class="preference-btn">Neutral</button>
                                    <button class="preference-btn">üëé</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="carousel-header">
                        <button class="nav-btn left-btn">‚ùÆ</button>
                        <div class="carousel-dots">
                            <div class="dot active"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                        </div>
                        <button class="nav-btn right-btn">‚ùØ</button>
                    </div>
                </div>

                <div class="question">Dietary preferences</div>
                <p class="subtitle">Please select any dietary restrictions or allergies on your team we should be aware of</p>

                <div class="dietary-options">
                    <button class="dietary-btn" data-value="vegan">Vegan/Vegetarian</button>
                    <button class="dietary-btn" data-value="gluten">Gluten Free</button>
                    <button class="dietary-btn" data-value="nut">Nut Free</button>
                    <button class="dietary-btn" data-value="halal">Halal</button>
                    <button class="dietary-btn" data-value="dairy">Dairy Free</button>
                </div>

                <div class="question">Any additional preferences or dietary restrictions on your team?</div>
                <input type="text" class="text-input" placeholder="ex. Halal Food">

                <div style="margin-top: 40px;">
                    <button class="continue-btn" onclick="goToStep(5)">Continue</button>
                    <button class="skip-btn" onclick="goToStep(5)">Skip for now</button>
                </div>
            </div>

            <!-- Step 5 - Thank You -->
            <div id="step5" class="step hidden">
                 <button class="back-btn" onclick="goToStep(3)">
                    <span>‚Üê</span> Back
                </button>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step active"></div>
                        <div class="progress-step"></div>
                    </div>
                </div>
                <div class="user-detail-form">
                   <form id="userForm">
                    <div class="input">
                        <input type="text" name="first_name" id="first_name" placeholder="Full Name*" required>
                        <input type="text" name="last_name" id="last_name" placeholder="Last Name*" required>
                    </div>
                    <div class="input">
                        <input type="text" name="company_name" id="company_name" placeholder="Company Name*" required>
                    </div>
                    <div class="input">
                        <input type="email" name="email" id="email" placeholder="Email*" required>
                    </div>
                    <div class="input">
                        <input type="email" name="confirm_email" id="confirm_email" placeholder="Confirm Email*" required>
                    </div>
                    <div class="input">
                        <input type="tel" name="phone" id="phone" placeholder="Phone Number*" required>
                    </div>
                    <div class="input">
                        <input type="text" name="delivery_address" id="delivery_address" placeholder="Delivery Address*" required>
                    </div>
                    <div class="input">
                        <input type="text" name="unit_suite" id="unit_suite" placeholder="Unit/suite (option)">
                    </div>
                    <div class="input">
                        <input type="text" name="delivery_instructions" id="delivery_instructions" placeholder="Special Delivery Instructions(Optional)">
                    </div>
                    <div style="margin-top: 40px;">
                        <button type="submit" class="continue-btn">Submit</button>
                        <button type="button" class="skip-btn" onclick="goToStep(6)">Skip</button>
                    </div>
                   </form>
                </div>
            </div>
            <div id="step6" class="step hidden">
                <div class="thank-you-container">
                    <svg class="email-icon" viewBox="0 0 200 200" fill="none">
                        <rect x="20" y="50" width="160" height="100" rx="8" fill="#e8e4f3"/>
                        <rect x="40" y="70" width="120" height="80" rx="4" fill="white"/>
                        <path d="M40 70 L100 110 L160 70" stroke="#24aca6" stroke-width="3" fill="none"/>
                        <rect x="80" y="95" width="40" height="30" rx="4" fill="#c4c4c4"/>
                    </svg>
                    <h1 class="thank-you-title">Thank you!</h1>
                    <p class="thank-you-text">Please check your email (including your spam folder) for the link to log in and manage your meal plan.</p>
                </div>
            </div>
        </div>

        <div class="testimonial-section">
            <div class="testimonial-content" id="testimonialContent">
                <div class="google-reviews">
                    <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    <span>üîç 380+ Google reviews</span>
                </div>
                <div class="avatar"></div>
                <p class="testimonial-text" id="testimonialText">
                    Great company, great concept, and great team all the way around! Help is fast and they are great to deal with! We order for our Calgary AND Vancouver offices - one admin, two provinces - it's just what we wanted!
                </p>
                <p class="testimonial-author" id="testimonialAuthor">- Carmen J.</p>
            </div>

            <div class="info-card hidden" id="infoCard">
                <svg class="info-illustration" viewBox="0 0 200 150">
                    <rect x="40" y="20" width="120" height="110" rx="8" fill="#fff"/>
                    <circle cx="100" cy="50" r="20" fill="#e8e4f3"/>
                    <rect x="60" y="80" width="80" height="8" rx="4" fill="#e8e4f3"/>
                    <rect x="60" y="95" width="80" height="8" rx="4" fill="#e8e4f3"/>
                    <path d="M140 40 Q150 30 160 40 L160 120 Q150 130 140 120 Z" fill="#fbbf24"/>
                </svg>
                <h2 class="info-title">Not sure yet?</h2>
                <p class="info-text">You can fill out your workplace preferences later! Since each person customizes their own meals, your options will automatically be curated based on your team's selection too!</p>
            </div>
        </div>
    </div>

    <script>
        // Original script from your code
        let currentStep = 1;
        let formData = {
            teamSize: '',
            mealType: '',
            customMealName: '',
            deliveryTime: '',
            frequency: '',
            days: [],
            selectedDates: [],
            startDate: '',
            allowanceType: '',
            allowanceAmount: 20,
            creditCard: true,
            dietary: [],
            additionalRestrictions: ''
        };

        const testimonials = [
            {
                text: "Great company, great concept, and great team all the way around! Help is fast and they are great to deal with! We order for our Calgary AND Vancouver offices - one admin, two provinces - it's just what we wanted!",
                author: "Carmen J."
            },
            {
                text: "We love CaterLoop at work, lunches are a breeze and everyone gets exactly what they want and stays within budget. The Customer Support there is first class, the entire team is very quick to reply and always happy to help.",
                author: "Julie R."
            },
            {
                text: "We started using CaterLoop this week and are so impressed! They have been quick to respond, timely, thoughtful, and have gone above and beyond in helping us cater office lunches and events. Would highly recommend using their services!",
                author: "Alyssa P."
            },
            {
                text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
                author: "Ralf K."
            },
            {
                text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
                author: "Alina J."
            }
        ];

        function formatTime24ToAmPm(time24) {
            if (!time24) return '';
            const [hh, mm] = time24.split(':').map(Number);
            const ampm = hh >= 12 ? 'pm' : 'am';
            const h = hh % 12 === 0 ? 12 : hh % 12;
            return `${h}:${String(mm).padStart(2, '0')} ${ampm}`;
        }

        // STEP 1
        (function initStep1() {
            const step1Btn = document.getElementById('step1Btn');
            const groupPlanLink = document.getElementById('groupPlanLink');

            document.querySelectorAll('#step1 .option-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('#step1 .option-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    formData.teamSize = this.dataset.value;

                    if (this.classList.contains('less')) {
                        if (step1Btn) step1Btn.classList.add('hidden');
                        if (groupPlanLink) groupPlanLink.classList.remove('hidden');
                    } else {
                        if (step1Btn) step1Btn.classList.remove('hidden');
                        if (groupPlanLink) groupPlanLink.classList.add('hidden');
                    }
                });
            });

            if (step1Btn) {
                step1Btn.addEventListener('click', () => {
                    if (formData.teamSize && !document.querySelector('#step1 .option-btn.less.selected')) {
                        goToStep(2);
                    } else if (!formData.teamSize) {
                        alert('Please select team size to continue');
                    }
                });
            }
        })();

        // STEP 2
        const defaultTimes = {
            breakfast: ['08:00', '09:00', '10:00', 'custom'],
            lunch: ['11:30', '12:00', '12:30', '13:00', 'custom'],
            dinner: ['16:00', '17:00', '18:00', '19:00', 'custom'],
            other: ['custom']
        };

        function clearElementChildren(el) {
            while (el.firstChild) el.removeChild(el.firstChild);
        }

        function renderTimeOptions(mealType) {
            const timeOptionsContainer = document.querySelector('#step2 .time-options');
            clearElementChildren(timeOptionsContainer);

            if (mealType === 'other') {
                const wrapper = document.createElement('div');
                wrapper.style.display = 'flex';
                wrapper.style.flexDirection = 'column';
                wrapper.style.gap = '12px';
                wrapper.style.marginBottom = '12px';

                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = 'Enter meal name (e.g., Team Snack)';
                input.className = 'text-input';
                input.value = formData.customMealName || '';
                input.addEventListener('input', () => {
                    formData.customMealName = input.value.trim();
                });

                wrapper.appendChild(input);
                timeOptionsContainer.appendChild(wrapper);
            }

            const times = defaultTimes[mealType] || defaultTimes.other;
            times.forEach(t => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'time-btn';
                btn.dataset.value = t;
                btn.textContent = t === 'custom' ? 'Select Your Time' : formatTime24ToAmPm(t);
                btn.addEventListener('click', async function () {
                    timeOptionsContainer.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');

                    if (t === 'custom') {
                        const picked = await showTimePickerModal();
                        if (picked) {
                            formData.deliveryTime = picked;
                            btn.textContent = formatTime24ToAmPm(picked);
                            btn.dataset.value = picked;
                        } else {
                            btn.classList.remove('selected');
                        }
                    } else {
                        formData.deliveryTime = t;
                    }
                });
                timeOptionsContainer.appendChild(btn);
            });
        }

        document.querySelectorAll('#step2 .meal-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('#step2 .meal-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                const meal = this.dataset.value;
                formData.mealType = meal;
                formData.deliveryTime = '';
                if (meal !== 'other') formData.customMealName = '';
                renderTimeOptions(meal);
            });
        });

        const step2Btn = document.getElementById('step2Btn');
        if (step2Btn) {
            step2Btn.addEventListener('click', () => {
                const needMealType = !formData.mealType;
                const needTime = !formData.deliveryTime;
                if (needMealType || needTime) {
                    alert('Please select meal type and delivery time to continue');
                    return;
                }
                if (formData.mealType === 'other' && !formData.customMealName) {
                    alert('Please enter a name for the meal (Other) before continuing');
                    return;
                }
                goToStep(3);
            });
        }

        function showTimePickerModal() {
            return new Promise(resolve => {
                let modal = document.getElementById('timePickerModal');
                if (!modal) {
                    modal = document.createElement('div');
                    modal.id = 'timePickerModal';
                    modal.style.position = 'fixed';
                    modal.style.left = '0';
                    modal.style.top = '0';
                    modal.style.width = '100%';
                    modal.style.height = '100%';
                    modal.style.display = 'flex';
                    modal.style.alignItems = 'center';
                    modal.style.justifyContent = 'center';
                    modal.style.background = 'rgba(0,0,0,0.4)';
                    modal.style.zIndex = '1000';

                    const box = document.createElement('div');
                    box.style.background = 'white';
                    box.style.padding = '20px';
                    box.style.borderRadius = '12px';
                    box.style.minWidth = '260px';
                    box.style.display = 'flex';
                    box.style.flexDirection = 'column';
                    box.style.gap = '12px';
                    box.style.alignItems = 'stretch';

                    const label = document.createElement('div');
                    label.textContent = 'Select a time';
                    label.style.fontWeight = '600';

                    const timeInput = document.createElement('input');
                    timeInput.type = 'time';
                    timeInput.id = 'modalTimeInput';
                    timeInput.style.fontSize = '16px';
                    timeInput.style.padding = '8px';

                    const actions = document.createElement('div');
                    actions.style.display = 'flex';
                    actions.style.justifyContent = 'flex-end';
                    actions.style.gap = '8px';

                    const cancelBtn = document.createElement('button');
                    cancelBtn.type = 'button';
                    cancelBtn.textContent = 'Cancel';
                    cancelBtn.className = 'continue-btn';
                    cancelBtn.style.background = '#ddd';
                    cancelBtn.style.color = '#000';

                    const saveBtn = document.createElement('button');
                    saveBtn.type = 'button';
                    saveBtn.textContent = 'Save';
                    saveBtn.className = 'continue-btn';

                    actions.appendChild(cancelBtn);
                    actions.appendChild(saveBtn);
                    box.appendChild(label);
                    box.appendChild(timeInput);
                    box.appendChild(actions);
                    modal.appendChild(box);
                    document.body.appendChild(modal);

                    cancelBtn.addEventListener('click', () => {
                        modal.remove();
                        resolve(null);
                    });

                    saveBtn.addEventListener('click', () => {
                        const val = timeInput.value;
                        modal.remove();
                        if (val) resolve(val);
                        else resolve(null);
                    });

                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modal.remove();
                            resolve(null);
                        }
                    });
                }
                const input = document.getElementById('modalTimeInput');
                if (input) input.focus();
            });
        }

        // STEP 3 - Modified for calendar functionality
        // --- Frequency buttons (every-week / custom-dates)
        document.querySelectorAll('.frequency-option').forEach(btn => {
             btn.addEventListener('click', function() {
                 document.querySelectorAll('.frequency-option').forEach(b => b.classList.remove('selected'));
                 this.classList.add('selected');
                 formData.frequency = this.dataset.value;
 
                 const daysQuestion = document.getElementById('daysQuestion');
                 const dayButtonsContainer = document.getElementById('dayButtonsContainer');
                 const calendarContainer = document.getElementById('calendarContainer');
 
                 if (this.dataset.value === 'every-week') {
                     daysQuestion.textContent = 'On what day(s) would you like to receive meals?';
                     dayButtonsContainer.style.display = 'flex';
                     calendarContainer.classList.remove('active');
                     formData.selectedDates = [];
                 } else if (this.dataset.value === 'custom-dates') {
                     daysQuestion.textContent = 'Select your custom delivery dates';
                     dayButtonsContainer.style.display = 'none';
                     calendarContainer.classList.add('active');
                     formData.days = [];
                     // Clear selected days
                     document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('selected'));
                    generateCalendars(); // render 3 months
                 }
                 checkStep3Complete();
             });
         });
 
         document.querySelectorAll('#step3 .day-btn').forEach(btn => {
             btn.addEventListener('click', function() {
                 this.classList.toggle('selected');
                 const day = this.dataset.value;
                 if (formData.days.includes(day)) {
                     formData.days = formData.days.filter(d => d !== day);
                 } else {
                     formData.days.push(day);
                 }
                 checkStep3Complete();
            });
         });
 
         // Allowance buttons (Daily / Weekly) - update slider bounds dynamically
         document.querySelectorAll('#step3 .time-btn[data-value="daily"], #step3 .time-btn[data-value="weekly"]').forEach(btn => {
            btn.addEventListener('click', function() {
                // toggle selection among allowance buttons only
                const allowanceButtons = Array.from(document.querySelectorAll('#step3 .time-btn[data-value="daily"], #step3 .time-btn[data-value="weekly"]'));
                allowanceButtons.forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');

                formData.allowanceType = this.dataset.value; // assign daily or weekly
                adjustAllowanceUI(this.dataset.value);
                checkStep3Complete();
            });
        });

        const slider = document.getElementById('allowanceSlider');
        const sliderValue = document.getElementById('sliderValue');

        if (slider) {
            slider.addEventListener('input', function() {
                formData.allowanceAmount = this.value;
                sliderValue.textContent = `$${this.value}`;
                const max = Number(this.max || 50);
                const percentage = (Number(this.value) / max) * 100;
                this.style.background = `linear-gradient(to right, #24aca6 0%, #24aca6 ${percentage}%, #e0e0e0 ${percentage}%, #e0e0e0 100%)`;
                checkStep3Complete();
            });
        }

        // fix the slider background calculation and support dynamic max
        function setSliderBackground(sliderEl, value, max) {
            const percentage = (value / max) * 100;
            sliderEl.style.background = `linear-gradient(to right, #24aca6 0%, #24aca6 ${percentage}%, #e0e0e0 ${percentage}%, #e0e0e0 100%)`;
        }
 
        function adjustAllowanceUI(type) {
            // question element sits just above .slider-container
            const questionEl = document.querySelector('.slider-container')?.previousElementSibling;
            const sliderEl = document.getElementById('allowanceSlider');
            const sliderValueEl = document.getElementById('sliderValue');
            const labels = document.querySelector('.slider-labels');
 
            if (!sliderEl || !sliderValueEl) return;
 
            if (type === 'daily') {
                if (questionEl) questionEl.textContent = 'Daily per person allowance';
                sliderEl.max = 50;
                if (Number(sliderEl.value) > 50) sliderEl.value = 20;
                sliderValueEl.textContent = `$${sliderEl.value}`;
                if (labels) {
                    labels.children[0].textContent = '$0';
                    labels.children[1].textContent = '$50';
                }
                setSliderBackground(sliderEl, Number(sliderEl.value), 50);
            } else if (type === 'weekly') {
                if (questionEl) questionEl.textContent = 'Weekly per person allowance';
                sliderEl.max = 100;
                // pick a sensible default if current value too high/low
                if (Number(sliderEl.value) > 100) sliderEl.value = 50;
                sliderValueEl.textContent = `$${sliderEl.value}`;
                if (labels) {
                    labels.children[0].textContent = '$0';
                    labels.children[1].textContent = '$100';
                }
                setSliderBackground(sliderEl, Number(sliderEl.value), 100);
            }
            formData.allowanceAmount = Number(sliderEl.value);
        }
 
         function toggleCredit() {
             const toggle = document.getElementById('creditToggle');
             if (!toggle) return;
             toggle.classList.toggle('on');
             toggle.classList.toggle('off');
             formData.creditCard = toggle.classList.contains('on');
         }
 
         function checkStep3Complete() {
             let complete = false;
             if (formData.frequency === 'every-week') {
                 complete = formData.days.length > 0 && formData.allowanceType;
             } else if (formData.frequency === 'custom-dates') {
                 complete = formData.selectedDates.length > 0 && formData.allowanceType;
             }
             const step3Btn = document.getElementById('step3Btn');
             if (step3Btn) step3Btn.disabled = !complete;
         }
 
         const step3Btn = document.getElementById('step3Btn');
         if (step3Btn) step3Btn.addEventListener('click', () => goToStep(4));
 
         // Calendar generation functions
         function generateCalendars() {
             const calendarsWrapper = document.getElementById('calendarsWrapper');
             calendarsWrapper.innerHTML = '';
 
             const today = new Date();
             // render exactly 3 months: current, next, next+1
             for (let i = 0; i < 3; i++) {
                 const calendarDate = new Date(today.getFullYear(), today.getMonth() + i, 1);
                 createCalendar(calendarDate, calendarsWrapper, today);
             }
         }
 
         function createCalendar(date, container, today) {
             const year = date.getFullYear();
             const month = date.getMonth();
             const firstDay = new Date(year, month, 1).getDay();
             const daysInMonth = new Date(year, month + 1, 0).getDate();
 
             const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                 'July', 'August', 'September', 'October', 'November', 'December'];
 
             const calendar = document.createElement('div');
             calendar.className = 'calendar';
 
             const header = document.createElement('div');
             header.className = 'calendar-header';
             header.textContent = `${monthNames[month]} ${year}`;
             calendar.appendChild(header);
 
             const weekdays = document.createElement('div');
             weekdays.className = 'calendar-weekdays';
             ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                 const dayEl = document.createElement('div');
                 dayEl.className = 'calendar-weekday';
                 dayEl.textContent = day;
                 weekdays.appendChild(dayEl);
             });
             calendar.appendChild(weekdays);
 
             const daysContainer = document.createElement('div');
             daysContainer.className = 'calendar-days';
 
             for (let i = 0; i < firstDay; i++) {
                 const emptyDay = document.createElement('div');
                 emptyDay.className = 'calendar-day empty';
                 daysContainer.appendChild(emptyDay);
             }
 
            // earliest selectable date = today + 5 days
            const minSelectable = new Date(today);
            minSelectable.setDate(today.getDate() + 5);
 
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDate = new Date(year, month, day);
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = day;
 
                // disable if before minSelectable
                if (dayDate < minSelectable) {
                    dayEl.classList.add('disabled');
                } else {
                    const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    if (formData.selectedDates.includes(dateString)) {
                        dayEl.classList.add('selected');
                    }
 
                    dayEl.addEventListener('click', function() {
                        // ensure date still within the three-month window and >= minSelectable
                        if (dayDate < minSelectable) return;
 
                        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        if (formData.selectedDates.includes(dateStr)) {
                            formData.selectedDates = formData.selectedDates.filter(d => d !== dateStr);
                            this.classList.remove('selected');
                        } else {
                            formData.selectedDates.push(dateStr);
                            this.classList.add('selected');
                        }
 
                        updateSelectedDatesSummary();
                        checkStep3Complete();
                    });
                }
 
                daysContainer.appendChild(dayEl);
            }
 
             calendar.appendChild(daysContainer);
             container.appendChild(calendar);
         }
 
         function updateSelectedDatesSummary() {
             const summaryList = document.getElementById('selectedDatesList');
             summaryList.innerHTML = '';
 
             if (formData.selectedDates.length === 0) {
                 summaryList.innerHTML = '<span style="color: #666;">No dates selected</span>';
                 return;
             }
 
             formData.selectedDates.sort().forEach(dateStr => {
                 const date = new Date(dateStr + 'T00:00:00');
                 const formatted = date.toLocaleDateString('en-US', { 
                     month: 'short', 
                     day: 'numeric', 
                     year: 'numeric' 
                 });
 
                 const tag = document.createElement('div');
                 tag.className = 'selected-date-tag';
                 tag.innerHTML = `
                     ${formatted}
                     <span class="remove-date" data-date="${dateStr}">‚úï</span>
                 `;
 
                 tag.querySelector('.remove-date').addEventListener('click', function() {
                     const dateToRemove = this.dataset.date;
                     formData.selectedDates = formData.selectedDates.filter(d => d !== dateToRemove);
                     generateCalendars();
                     updateSelectedDatesSummary();
                     checkStep3Complete();
                 });
 
                 summaryList.appendChild(tag);
             });
         }

        // STEP 4
        document.querySelectorAll('#step4 .dietary-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                const dietary = this.dataset.value;
                if (formData.dietary.includes(dietary)) {
                    formData.dietary = formData.dietary.filter(d => d !== dietary);
                } else {
                    formData.dietary.push(dietary);
                }
            });
        });

        document.querySelectorAll('#step4 .preference-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const buttons = this.parentElement.querySelectorAll('.preference-btn');
                buttons.forEach(b => b.style.background = 'white');
                this.style.background = '#f0f0f0';
            });
        });

        // Navigation function
        function goToStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.add('hidden'));
            const el = document.getElementById('step' + step);
            if (el) el.classList.remove('hidden');
            currentStep = step;

            if (step === 2) {
                document.getElementById('testimonialContent').classList.remove('hidden');
                document.getElementById('infoCard').classList.add('hidden');
            } else if (step === 3) {
                document.getElementById('testimonialContent').classList.remove('hidden');
                document.getElementById('infoCard').classList.add('hidden');
            }
            else if (step === 4) {
                document.getElementById('testimonialContent').classList.remove('hidden');
                document.getElementById('infoCard').classList.add('hidden');
            }else if (step === 5) {
                document.getElementById('testimonialContent').classList.remove('hidden');
                document.getElementById('infoCard').classList.add('hidden');
            }else if (step === 6) {
                document.getElementById('testimonialContent').classList.add('hidden');
                document.getElementById('infoCard').classList.remove('hidden');
            }else {
                document.getElementById('testimonialContent').classList.remove('hidden');
                document.getElementById('infoCard').classList.add('hidden');
}
            const testimonialIndex = (step - 1) % testimonials.length;
            document.getElementById('testimonialText').textContent = testimonials[testimonialIndex].text;
            document.getElementById('testimonialAuthor').textContent = '- ' + testimonials[testimonialIndex].author;

            window.scrollTo(0, 0);
        }

        // Carousel dots functionality for step 4
        let carouselIndex = 0;
        document.querySelectorAll('#step4 .dot').forEach((dot, index) => {
            dot.addEventListener('click', () => {
                document.querySelectorAll('#step4 .dot').forEach(d => d.classList.remove('active'));
                dot.classList.add('active');
                carouselIndex = index;
            });
        });

        // Initialize UI
        document.getElementById('step1').classList.remove('hidden');

        // Carousel JS
        const foodCategories = document.querySelector('.food-categories');
        const dots = document.querySelectorAll('.dot');
        const leftBtn = document.querySelector('.left-btn');
        const rightBtn = document.querySelector('.right-btn');

        let currentIndex = 0;
        const totalDots = dots.length;

        function updateCarousel() {
            const offset = currentIndex * -100;
            foodCategories.style.transform = `translateX(${offset}%)`;
            dots.forEach((dot, i) => dot.classList.toggle('active', i === currentIndex));
        }

        if (rightBtn) {
            rightBtn.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % totalDots;
                updateCarousel();
            });
        }

        if (leftBtn) {
            leftBtn.addEventListener('click', () => {
                currentIndex = (currentIndex - 1 + totalDots) % totalDots;
                updateCarousel();
            });
        }

        dots.forEach((dot, i) => {
            dot.addEventListener('click', () => {
                currentIndex = i;
                updateCarousel();
            });
        });

        updateCarousel();

        // Start Date Calendar functionality
const startDateBtn = document.getElementById('startDateBtn');
const startDateCalendarContainer = document.getElementById('startDateCalendarContainer');
const notSureBtn = document.getElementById('notSureBtn');

if (startDateBtn) {
    startDateBtn.addEventListener('click', function() {
        const isActive = startDateCalendarContainer.classList.contains('active');
        if (isActive) {
            startDateCalendarContainer.classList.remove('active');
        } else {
            startDateCalendarContainer.classList.add('active');
            generateStartDateCalendar();
            // Deselect "not sure" button
            if (notSureBtn) notSureBtn.classList.remove('selected');
            formData.startDate = '';
        }
    });
}

if (notSureBtn) {
    notSureBtn.addEventListener('click', function() {
        this.classList.toggle('selected');
        if (this.classList.contains('selected')) {
            formData.startDate = 'not-sure';
            startDateCalendarContainer.classList.remove('active');
            // Update button text
            startDateBtn.innerHTML = '<span>üìÖ</span> Select date';
        } else {
            formData.startDate = '';
        }
    });
}

function generateStartDateCalendar() {
    const calendarsWrapper = document.getElementById('startDateCalendarsWrapper');
    calendarsWrapper.innerHTML = '';

    const today = new Date();
    createStartDateCalendar(today, calendarsWrapper, today);
}

function createStartDateCalendar(date, container, today) {
    const year = date.getFullYear();
    const month = date.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'];

    const calendar = document.createElement('div');
    calendar.className = 'calendar';

    const header = document.createElement('div');
    header.className = 'calendar-header';
    header.textContent = `${monthNames[month]} ${year}`;
    calendar.appendChild(header);

    const weekdays = document.createElement('div');
    weekdays.className = 'calendar-weekdays';
    ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
        const dayEl = document.createElement('div');
        dayEl.className = 'calendar-weekday';
        dayEl.textContent = day;
        weekdays.appendChild(dayEl);
    });
    calendar.appendChild(weekdays);

    const daysContainer = document.createElement('div');
    daysContainer.className = 'calendar-days';

    for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day empty';
        daysContainer.appendChild(emptyDay);
    }

    // Minimum date is today
    const minSelectable = new Date(today);
    minSelectable.setHours(0, 0, 0, 0);

    for (let day = 1; day <= daysInMonth; day++) {
        const dayDate = new Date(year, month, day);
        dayDate.setHours(0, 0, 0, 0);
        const dayEl = document.createElement('div');
        dayEl.className = 'calendar-day';
        dayEl.textContent = day;

        if (dayDate < minSelectable) {
            dayEl.classList.add('disabled');
        } else {
            const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            
            if (formData.startDate === dateString) {
                dayEl.classList.add('selected');
            }

            dayEl.addEventListener('click', function() {
                if (dayDate < minSelectable) return;

                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                // Clear previous selection
                const allDays = daysContainer.querySelectorAll('.calendar-day');
                allDays.forEach(d => d.classList.remove('selected'));
                
                // Select this date
                this.classList.add('selected');
                formData.startDate = dateStr;
                
                // Update button text
                const date = new Date(dateStr + 'T00:00:00');
                const formatted = date.toLocaleDateString('en-US', { 
                    month: 'short', 
                    day: 'numeric', 
                    year: 'numeric' 
                });
                startDateBtn.innerHTML = `<span>üìÖ</span> ${formatted}`;
                
                updateStartDateSummary();
                
                // Deselect "not sure" button
                if (notSureBtn) notSureBtn.classList.remove('selected');
            });
        }

        daysContainer.appendChild(dayEl);
    }

    calendar.appendChild(daysContainer);
    container.appendChild(calendar);
}

function updateStartDateSummary() {
    const summaryDiv = document.getElementById('startDateSummary');
    const displayDiv = document.getElementById('startDateDisplay');
    
    if (!formData.startDate || formData.startDate === 'not-sure') {
        summaryDiv.style.display = 'none';
        return;
    }

    summaryDiv.style.display = 'block';
    const date = new Date(formData.startDate + 'T00:00:00');
    const formatted = date.toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        year: 'numeric' 
    });

    displayDiv.innerHTML = `
        <div class="selected-date-tag">
            ${formatted}
            <span class="remove-date" style="cursor: pointer;">‚úï</span>
        </div>
    `;

    displayDiv.querySelector('.remove-date').addEventListener('click', function() {
        formData.startDate = '';
        startDateBtn.innerHTML = '<span>üìÖ</span> Select date';
        generateStartDateCalendar();
        updateStartDateSummary();
    });
}

        // Form submit handler: collect visible form fields and merge with step data (formData)
        (function attachFormSubmit() {
            const userForm = document.getElementById('userForm');
            if (!userForm) return;

            userForm.addEventListener('submit', async function (e) {
                e.preventDefault();

                // collect form fields
                const fd = new FormData(userForm);
                const userFields = {};
                fd.forEach((value, key) => { userFields[key] = value; });

                // combine with the previously collected multi-step data
                const payload = Object.assign({}, formData, { user: userFields });

                try {
                    // Create a structured object with all the form data
                    const formObject = {
                        // Step 1 data
                        teamSize: formData.teamSize,
                        
                        // Step 2 data
                        mealType: formData.mealType,
                        customMealName: formData.customMealName,
                        deliveryTime: formData.deliveryTime,
                        
                        // Step 3 data
                        frequency: formData.frequency,
                        days: formData.days,
                        selectedDates: formData.selectedDates,
                        startDate: formData.startDate,
                        allowanceType: formData.allowanceType,
                        allowanceAmount: formData.allowanceAmount,
                        creditCard: formData.creditCard,
                        
                        // Step 4 data
                        dietary: formData.dietary,
                        
                        // Step 5 - User Details
                        userDetails: {
                            firstName: fd.get('first_name'),
                            lastName: fd.get('last_name'),
                            companyName: fd.get('company_name'),
                            email: fd.get('email'),
                            phone: fd.get('phone'),
                            deliveryAddress: fd.get('delivery_address'),
                            unitSuite: fd.get('unit_suite'),
                            instructions: fd.get('delivery_instructions')
                        }
                    };

                    const res = await fetch('submit.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formObject)
                    });

                    // Check if we got HTML response (data display) or JSON
                    const contentType = res.headers.get('content-type');
                    if (contentType && contentType.includes('text/html')) {
                        // If HTML response, display it in a new window
                        const text = await res.text();
                        const win = window.open('', 'FormData');
                        win.document.write(text);
                    } else {
                        // Try parsing as JSON for error handling
                        const json = await res.json().catch(() => null);
                        if (!res.ok) {
                            const msg = (json && json.message) ? json.message : (res.statusText || 'Submission failed');
                            alert('Submission failed: ' + msg);
                            return;
                        }
                    }
                    
                    // If we got here, submission was successful
                    goToStep(6);
                } catch (err) {
                    alert('Error submitting form: ' + (err.message || err));
                }
            });
        })();



    </script>
</body>
</html>